[gd_scene load_steps=13 format=2]

[ext_resource path="res://character.tscn" type="PackedScene" id=1]
[ext_resource path="res://factory.glb" type="PackedScene" id=2]
[ext_resource path="res://interpolated_node.gd" type="Script" id=3]
[ext_resource path="res://draw_path.gd" type="Script" id=4]
[ext_resource path="res://base_scene.gd" type="Script" id=6]
[ext_resource path="res://Enemy.tscn" type="PackedScene" id=7]

[sub_resource type="ConcavePolygonShape" id=1]
data = PoolVector3Array( 0, 2.4, 0, 3.26, 0, 0, 0, 0, 0, 0, 2.4, 0, 3.26, 2.4, 0, 3.26, 0, 0, 3.26, 2.4, 0, 3.26, 0, -10, 3.26, 0, 0, 3.26, 2.4, 0, 3.26, 2.4, -10, 3.26, 0, -10, 3.26, 2.4, -10, 14.77, 0, -10, 3.26, 0, -10, 3.26, 2.4, -10, 14.77, 2.4, -10, 14.77, 0, -10, 14.77, 2.4, -10, 14.77, 0, -9.05, 14.77, 0, -10, 14.77, 2.4, -10, 14.77, 2.4, -9.05, 14.77, 0, -9.05, 14.77, 2.4, -9.05, 12.68, 0, -9.05, 14.77, 0, -9.05, 14.77, 2.4, -9.05, 12.68, 2.4, -9.05, 12.68, 0, -9.05, 12.68, 2.4, -9.05, 12.68, 0, -4.05, 12.68, 0, -9.05, 12.68, 2.4, -9.05, 12.68, 2.4, -4.05, 12.68, 0, -4.05, 12.68, 2.4, -4.05, 18.68, 0, -4.05, 12.68, 0, -4.05, 12.68, 2.4, -4.05, 18.68, 2.4, -4.05, 18.68, 0, -4.05, 18.68, 2.4, -4.05, 18.68, 0, -9.05, 18.68, 0, -4.05, 18.68, 2.4, -4.05, 18.68, 2.4, -9.05, 18.68, 0, -9.05, 18.68, 2.4, -9.05, 16.53, 0, -9.05, 18.68, 0, -9.05, 18.68, 2.4, -9.05, 16.53, 2.4, -9.05, 16.53, 0, -9.05, 16.53, 2.4, -9.05, 16.53, 0, -10.05, 16.53, 0, -9.05, 16.53, 2.4, -9.05, 16.53, 2.4, -10.05, 16.53, 0, -10.05, 16.53, 2.4, -10.05, 19.84, 0, -10.05, 16.53, 0, -10.05, 16.53, 2.4, -10.05, 19.84, 2.4, -10.05, 19.84, 0, -10.05, 19.84, 2.4, -10.05, 19.84, 0, -12.97, 19.84, 0, -10.05, 19.84, 2.4, -10.05, 19.84, 2.4, -12.97, 19.84, 0, -12.97, 19.84, 2.4, -12.97, 3.29, 0, -12.97, 19.84, 0, -12.97, 19.84, 2.4, -12.97, 3.29, 2.4, -12.97, 3.29, 0, -12.97, 3.29, 2.4, -12.97, 3.29, 0, -23.12, 3.29, 0, -12.97, 3.29, 2.4, -12.97, 3.29, 2.4, -23.12, 3.29, 0, -23.12, 3.29, 2.4, -23.12, 4.29, 0, -23.12, 3.29, 0, -23.12, 3.29, 2.4, -23.12, 4.29, 2.4, -23.12, 4.29, 0, -23.12, 4.29, 2.4, -23.12, 4.29, 0, -21.21, 4.29, 0, -23.12, 4.29, 2.4, -23.12, 4.29, 2.4, -21.21, 4.29, 0, -21.21, 4.29, 2.4, -21.21, 14.41, 0, -21.21, 4.29, 0, -21.21, 4.29, 2.4, -21.21, 14.41, 2.4, -21.21, 14.41, 0, -21.21, 14.41, 2.4, -21.21, 14.41, 0, -26.65, 14.41, 0, -21.21, 14.41, 2.4, -21.21, 14.41, 2.4, -26.65, 14.41, 0, -26.65, 14.41, 2.4, -26.65, 4.25, 0, -26.65, 14.41, 0, -26.65, 14.41, 2.4, -26.65, 4.25, 2.4, -26.65, 4.25, 0, -26.65, 4.25, 2.4, -26.65, 4.25, 0, -24.86, 4.25, 0, -26.65, 4.25, 2.4, -26.65, 4.25, 2.4, -24.86, 4.25, 0, -24.86, 4.25, 2.4, -24.86, 3.21, 0, -24.86, 4.25, 0, -24.86, 4.25, 2.4, -24.86, 3.21, 2.4, -24.86, 3.21, 0, -24.86, 3.21, 2.4, -24.86, 3.21, 0, -29.16, 3.21, 0, -24.86, 3.21, 2.4, -24.86, 3.21, 2.4, -29.16, 3.21, 0, -29.16, 3.21, 2.4, -29.16, -13.73, 0, -29.16, 3.21, 0, -29.16, 3.21, 2.4, -29.16, -13.73, 2.4, -29.16, -13.73, 0, -29.16, -13.73, 2.4, -29.16, -13.73, 0, -25.87, -13.73, 0, -29.16, -13.73, 2.4, -29.16, -13.73, 2.4, -25.87, -13.73, 0, -25.87, -13.73, 2.4, -25.87, 0.08, 0, -25.87, -13.73, 0, -25.87, -13.73, 2.4, -25.87, 0.08, 2.4, -25.87, 0.08, 0, -25.87, 0.08, 2.4, -25.87, 0, 0, 0, 0.08, 0, -25.87, 0.08, 2.4, -25.87, 0, 2.4, 0, 0, 0, 0 )

[sub_resource type="ConcavePolygonShape" id=2]
data = PoolVector3Array( 3.21, 0, -24.86, 0.08, 0, -25.87, 3.21, 0, -29.16, 0.08, 0, -25.87, -13.73, 0, -29.16, 3.21, 0, -29.16, 0.08, 0, -25.87, -13.73, 0, -25.87, -13.73, 0, -29.16, 14.41, 0, -21.21, 4.25, 0, -26.65, 14.41, 0, -26.65, 14.41, 0, -21.21, 4.25, 0, -24.86, 4.25, 0, -26.65, 3.21, 0, -24.86, 0, 0, 0, 0.08, 0, -25.87, 14.41, 0, -21.21, 3.21, 0, -24.86, 4.25, 0, -24.86, 14.41, 0, -21.21, 4.29, 0, -23.12, 3.21, 0, -24.86, 4.29, 0, -23.12, 3.29, 0, -23.12, 3.21, 0, -24.86, 3.29, 0, -23.12, 0, 0, 0, 3.21, 0, -24.86, 14.41, 0, -21.21, 4.29, 0, -21.21, 4.29, 0, -23.12, 3.29, 0, -12.97, 0, 0, 0, 3.29, 0, -23.12, 19.84, 0, -10.05, 3.29, 0, -12.97, 19.84, 0, -12.97, 19.84, 0, -10.05, 16.53, 0, -10.05, 3.29, 0, -12.97, 16.53, 0, -10.05, 3.26, 0, -10, 3.29, 0, -12.97, 3.26, 0, -10, 0, 0, 0, 3.29, 0, -12.97, 16.53, 0, -9.05, 14.77, 0, -10, 16.53, 0, -10.05, 14.77, 0, -10, 3.26, 0, -10, 16.53, 0, -10.05, 16.53, 0, -9.05, 14.77, 0, -9.05, 14.77, 0, -10, 3.26, 0, 0, 0, 0, 0, 3.26, 0, -10, 18.68, 0, -4.05, 16.53, 0, -9.05, 18.68, 0, -9.05, 18.68, 0, -4.05, 14.77, 0, -9.05, 16.53, 0, -9.05, 18.68, 0, -4.05, 12.68, 0, -9.05, 14.77, 0, -9.05, 18.68, 0, -4.05, 12.68, 0, -4.05, 12.68, 0, -9.05 )

[sub_resource type="ConcavePolygonShape" id=3]
data = PoolVector3Array( 3.21, 2.4, -24.86, 0.08, 2.4, -25.87, 3.21, 2.4, -29.16, 0.08, 2.4, -25.87, -13.73, 2.4, -29.16, 3.21, 2.4, -29.16, 0.08, 2.4, -25.87, -13.73, 2.4, -25.87, -13.73, 2.4, -29.16, 14.41, 2.4, -21.21, 4.25, 2.4, -26.65, 14.41, 2.4, -26.65, 14.41, 2.4, -21.21, 4.25, 2.4, -24.86, 4.25, 2.4, -26.65, 3.21, 2.4, -24.86, 0, 2.4, 0, 0.08, 2.4, -25.87, 14.41, 2.4, -21.21, 3.21, 2.4, -24.86, 4.25, 2.4, -24.86, 14.41, 2.4, -21.21, 4.29, 2.4, -23.12, 3.21, 2.4, -24.86, 4.29, 2.4, -23.12, 3.29, 2.4, -23.12, 3.21, 2.4, -24.86, 3.29, 2.4, -23.12, 0, 2.4, 0, 3.21, 2.4, -24.86, 14.41, 2.4, -21.21, 4.29, 2.4, -21.21, 4.29, 2.4, -23.12, 3.29, 2.4, -12.97, 0, 2.4, 0, 3.29, 2.4, -23.12, 19.84, 2.4, -10.05, 3.29, 2.4, -12.97, 19.84, 2.4, -12.97, 19.84, 2.4, -10.05, 16.53, 2.4, -10.05, 3.29, 2.4, -12.97, 16.53, 2.4, -10.05, 3.26, 2.4, -10, 3.29, 2.4, -12.97, 3.26, 2.4, -10, 0, 2.4, 0, 3.29, 2.4, -12.97, 16.53, 2.4, -9.05, 14.77, 2.4, -10, 16.53, 2.4, -10.05, 14.77, 2.4, -10, 3.26, 2.4, -10, 16.53, 2.4, -10.05, 16.53, 2.4, -9.05, 14.77, 2.4, -9.05, 14.77, 2.4, -10, 3.26, 2.4, 0, 0, 2.4, 0, 3.26, 2.4, -10, 18.68, 2.4, -4.05, 16.53, 2.4, -9.05, 18.68, 2.4, -9.05, 18.68, 2.4, -4.05, 14.77, 2.4, -9.05, 16.53, 2.4, -9.05, 18.68, 2.4, -4.05, 12.68, 2.4, -9.05, 14.77, 2.4, -9.05, 18.68, 2.4, -4.05, 12.68, 2.4, -4.05, 12.68, 2.4, -9.05 )

[sub_resource type="SpatialMaterial" id=4]
flags_unshaded = true
flags_no_depth_test = true

[sub_resource type="Environment" id=5]
background_energy = 0.0

[sub_resource type="NavigationMesh" id=6]
vertices = PoolVector3Array( 3.21, 0, -24.86, 3.21, 0, -29.16, 0.0799961, 0, -25.87, -13.73, 0, -29.16, -13.73, 0, -25.87, 14.41, 0, -21.21, 14.41, 0, -26.65, 4.25, 0, -26.65, 4.25, 0, -24.86, 0, 0, 0, 4.29, 0, -23.12, 3.29, 0, -23.12, 4.29, 0, -21.21, 3.29, 0, -12.97, 19.84, 0, -10.05, 19.84, 0, -12.97, 16.53, 0, -10.05, 3.26, 0, -10, 16.53, 0, -9.05, 14.77, 0, -10, 14.77, 0, -9.05, 3.26, 0, 0, 18.68, 0, -4.05, 18.68, 0, -9.05, 12.68, 0, -9.05, 12.68, 0, -4.05 )
polygons = [ PoolIntArray( 0, 2, 1 ), PoolIntArray( 2, 3, 1 ), PoolIntArray( 2, 4, 3 ), PoolIntArray( 5, 7, 6 ), PoolIntArray( 5, 8, 7 ), PoolIntArray( 0, 9, 2 ), PoolIntArray( 5, 0, 8 ), PoolIntArray( 5, 10, 0 ), PoolIntArray( 10, 11, 0 ), PoolIntArray( 11, 9, 0 ), PoolIntArray( 5, 12, 10 ), PoolIntArray( 13, 9, 11 ), PoolIntArray( 14, 13, 15 ), PoolIntArray( 14, 16, 13 ), PoolIntArray( 16, 17, 13 ), PoolIntArray( 17, 9, 13 ), PoolIntArray( 18, 19, 16 ), PoolIntArray( 19, 17, 16 ), PoolIntArray( 18, 20, 19 ), PoolIntArray( 21, 9, 17 ), PoolIntArray( 22, 18, 23 ), PoolIntArray( 22, 20, 18 ), PoolIntArray( 22, 24, 20 ), PoolIntArray( 22, 25, 24 ) ]

[node name="Spatial" type="Spatial"]
script = ExtResource( 6 )

[node name="factory" parent="." instance=ExtResource( 2 )]

[node name="StaticBody" type="StaticBody" parent="factory/Room" index="3"]
collision_layer = 4
collision_mask = 0

[node name="CollisionShape" type="CollisionShape" parent="factory/Room/StaticBody"]
shape = SubResource( 1 )

[node name="CollisionShape2" type="CollisionShape" parent="factory/Room/StaticBody"]
shape = SubResource( 2 )

[node name="CollisionShape3" type="CollisionShape" parent="factory/Room/StaticBody"]
shape = SubResource( 3 )

[node name="Player" parent="." instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.498, 0, -0.228833 )
collision_mask = 4

[node name="OmniLight" type="OmniLight" parent="Player/ControllablePivot/Camera" index="0"]
light_energy = 0.01

[node name="RemoteTransform" type="RemoteTransform" parent="Player"]
remote_path = NodePath("../../Hand")
update_rotation = false
update_scale = false

[node name="Enemy" parent="." instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4.26579, 0.0554771, -11.4651 )
collision_mask = 4

[node name="DrawPath" type="ImmediateGeometry" parent="Enemy/Goto" index="0"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.831259, -0.555477, 12.9353 )
material_override = SubResource( 4 )
script = ExtResource( 4 )

[node name="Hand" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.498, 0, -0.228833 )

[node name="SpotLight" type="SpotLight" parent="Hand"]
process_priority = -1
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, 0 )
spot_range = 20.0
spot_attenuation = 8.0
script = ExtResource( 3 )
target_node_path = NodePath("../../Player/ControllablePivot")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 5 )

[node name="Navigation" type="Navigation" parent="."]

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Navigation"]
navmesh = SubResource( 6 )

[editable path="factory"]

[editable path="Player"]

[editable path="Enemy"]
